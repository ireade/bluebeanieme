"use strict";!function(){var e=function(){function e(){u.clearRect(0,0,s.width,s.height),s.width=o,s.height=i}function t(){u.drawImage(g,0,0,o,i)}function n(){var e=h/1.7,t=37*e/320,n=h/2-e/2;u.drawImage(m,n,i-40,e,t)}var o=h,i=g.height*o/g.width;e(),t(),n()},t=function(){e();var t=f.right.x-f.left.x+40;u.drawImage(d,f.left.x,f.left.y-t,t,t)},n=function(e){u.fillStyle="#29a2ef",u.fillRect(e.x-10,e.y-10,20,20)},o=function(e){f.left=e,document.querySelector(".instruction-1").classList.remove("highlight"),document.querySelector(".instruction-2").classList.add("highlight")},i=function(e){f.right=e,document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.add("highlight")},c=function(e){switch(e){case"left":f.left.x--,f.right.x--;break;case"right":f.left.x++,f.right.x++;break;case"down":f.left.y++,f.right.y++;break;case"up":f.left.y--,f.right.y--}t()},r=function(){var e=document.getElementById("canvas"),t=e.toDataURL("image/png");sessionStorage.setItem("bluebeanieme",t),window.location.href="finish.html"},a=function(){y=0,e(),document.querySelector(".instruction-1").classList.add("highlight"),document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.remove("highlight")},l=function(e){y++,3===y&&(y=1);var c={x:e.offsetX,y:e.offsetY};switch(n(c),y){case 1:o(c);break;case 2:i(c),setTimeout(function(){t()},500)}},s=document.getElementById("canvas"),u=s.getContext("2d"),d=document.getElementById("beanie"),m=document.getElementById("logo"),g=document.getElementById("image");g.setAttribute("crossOrigin","anonymous"),g.src=window.location.href.split("?img=")[1];var h=400,f={left:{},right:{}},y=0;setTimeout(function(){e()},1e3),s.addEventListener("click",l);var v=Array.from(document.querySelectorAll(".btn-move-beanie"));v.forEach(function(e){e.addEventListener("click",function(e){c(e.target.dataset.direction)})}),document.getElementById("export").addEventListener("click",r),document.getElementById("reset").addEventListener("click",a),document.addEventListener("keyup",function(e){if(2!==y)return!1;switch(e.preventDefault(),e.keyCode){case 39:c("right");break;case 37:c("left");break;case 38:c("up");break;case 40:c("down")}})}();