"use strict";!function(){var t=function(){function t(){d.clearRect(0,0,l.width,l.height),l.width=n,l.height=c}function e(){d.drawImage(g,0,0,n,c)}function i(){var t=m/1.7,e=37*t/320,i=m/2-t/2;d.drawImage(h,i,c-60,t,e)}var n=m,c=g.height*n/g.width;t(),e(),i()},e=function(){t();var e=f.right.x-f.left.x+40;d.drawImage(u,f.left.x,f.left.y-e,e,e)},i=function(t){d.lineWidth="2",d.strokeStyle="blue",d.rect(t.x-10,t.y-10,20,20),d.stroke()},n=function(t){f.left=t,document.querySelector(".instruction-1").classList.remove("highlight"),document.querySelector(".instruction-2").classList.add("highlight")},c=function(t){f.right=t,document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.add("highlight")},r=function(t){var i=t.target.dataset.direction;switch(i){case"left":f.left.x--,f.right.x--;break;case"right":f.left.x++,f.right.x++;break;case"down":f.left.y++,f.right.y++;break;case"up":f.left.y--,f.right.y--}e()},o=function(){var t=document.getElementById("canvas"),e=t.toDataURL();window.open(e)},a=function(){y=0,t(),document.querySelector(".instruction-1").classList.add("highlight"),document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.remove("highlight")},s=function(t){y++,3===y&&(y=1);var r={x:t.offsetX,y:t.offsetY};switch(i(r),y){case 1:n(r);break;case 2:c(r),e()}},l=document.getElementById("canvas"),d=l.getContext("2d"),u=document.getElementById("beanie"),h=document.getElementById("logo"),g=document.getElementById("image");g.src=window.location.href.split("?img=")[1];var m=400,f={left:{},right:{}},y=0;setTimeout(function(){t()},1e3),l.addEventListener("click",s);var v=Array.from(document.querySelectorAll(".btn-move-beanie"));v.forEach(function(t){t.addEventListener("click",r)}),document.getElementById("export").addEventListener("click",o),document.getElementById("reset").addEventListener("click",a)}();