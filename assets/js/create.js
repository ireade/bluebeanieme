"use strict";!function(){var e=function(){function e(){s.clearRect(0,0,u.width,u.height),u.width=i,u.height=o}function t(){s.drawImage(g,0,0,i,o)}function n(){var e=h/1.7,t=37*e/320,n=h/2-e/2;s.drawImage(m,n,o-40,e,t)}var i=h,o=g.height*i/g.width;e(),t(),n()},t=function(){e();var t=f.right.x-f.left.x+40;s.drawImage(d,f.left.x,f.left.y-t,t,t)},n=function(e){s.fillStyle="#29a2ef",s.fillRect(e.x-10,e.y-10,20,20)},i=function(e){f.left=e,document.querySelector(".instruction-1").classList.remove("highlight"),document.querySelector(".instruction-2").classList.add("highlight")},o=function(e){f.right=e,document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.add("highlight")},c=function(e){var n=e.target.dataset.direction;switch(n){case"left":f.left.x--,f.right.x--;break;case"right":f.left.x++,f.right.x++;break;case"down":f.left.y++,f.right.y++;break;case"up":f.left.y--,f.right.y--}t()},r=function(){var e=document.getElementById("canvas"),t=e.toDataURL("image/png");sessionStorage.setItem("bluebeanieme",t),window.location.href="finish.html"},l=function(){y=0,e(),document.querySelector(".instruction-1").classList.add("highlight"),document.querySelector(".instruction-2").classList.remove("highlight"),document.querySelector(".instruction-3").classList.remove("highlight")},a=function(e){y++,3===y&&(y=1);var c={x:e.offsetX,y:e.offsetY};switch(n(c),y){case 1:i(c);break;case 2:o(c),setTimeout(function(){t()},500)}},u=document.getElementById("canvas"),s=u.getContext("2d"),d=document.getElementById("beanie"),m=document.getElementById("logo"),g=document.getElementById("image");g.setAttribute("crossOrigin","anonymous"),g.src=window.location.href.split("?img=")[1];var h=400,f={left:{},right:{}},y=0;setTimeout(function(){e()},1e3),u.addEventListener("click",a);var v=Array.from(document.querySelectorAll(".btn-move-beanie"));v.forEach(function(e){e.addEventListener("click",c)}),document.getElementById("export").addEventListener("click",r),document.getElementById("reset").addEventListener("click",l)}();